import{u as D,r as a,j as e,M,T as P,D as B,A as O,m as W,a as T,b as N,c as F}from"./index-DJCjjSt3.js";function Y({words:u,isOpen:n,setIsOpen:_,editWord:w,oldWord:g,oldTranslations:p,oldIsDifficult:m,remove:j}){const o=D(c=>c.isEn),[f,r]=a.useState(!1),[l,h]=a.useState(g),[x,v]=a.useState(p),[i,t]=a.useState({text:"",id:-1}),S=/[\^@$[\]{}"]/,k=a.useRef(null);a.useEffect(()=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{t({text:"",id:-1}),k.current=null},5e3)},[i]);function C(){if(l.length===0||x.length===0){t({text:o?"Enter the field":"Заповніть поле",id:l.length===0?1:2});return}if(S.test(l)||S.test(x)){t(o?'Remove forbidden characters (^ @ $ [ ] { } ")':'Приберіть заборонені символи (^ @ $ [ ] { } ")');return}if(Object.keys(u).find(c=>u[c].word===l&&u[c].word!==g)){t({text:o?"This word already exists":"Таке слово вже існує",id:1});return}if(x.some((c,E)=>x.indexOf(c)!==E)){t({text:o?"This translation already exists":"Такий переклад вже існує",id:2});return}if(x.some(c=>c.length===0)){t({text:o?"Enter the translation":"Заповніть переклад",id:2});return}w(l,x,m),t({text:"",id:-1}),_(!1)}function d(){if(x.length>9){t({text:o?"Maximum 10 translations!":"Максимум 10 перекладів!",id:2});return}const c=[...x];c.push(""),v(c)}return e.jsxs(M,{isOpen:n,onClose:()=>_(!1),children:[e.jsx("div",{className:"modal__header",children:o?"Editing a word":"Редагування слова"}),e.jsxs("div",{className:"modal__inputs",children:[e.jsx("input",{type:"text",placeholder:o?"Word":"Слово",className:i.id===1?"modal__input error":"modal__input",value:l,onChange:c=>h(c.target.value)}),x.map((c,E)=>e.jsx(P,{value:c,index:E,error:i.text,setError:t,translations:x,setTranslations:v,forbidden:S},E)),e.jsx("p",{className:"gradient add",onClick:d,children:o?"Add new translation":"Додати новий переклад"})]}),e.jsx(B,{isOpen:f,setIsOpen:r,remove:j}),e.jsx(O,{mode:"wait",children:i.id>0&&e.jsx(W.div,{className:"modal__error",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i.text})}),e.jsxs("div",{className:"modal__buttons",children:[e.jsx("div",{className:"modal__button modal__delete",onClick:()=>r(!0),children:o?"Delete":"Видалити"}),e.jsx("div",{className:"modal__button gradient",onClick:C,children:o?"Save":"Зберегти"})]})]})}function q({isOpen:u,setIsOpen:n,ID:_,word:w,translations:g,time:p,isDifficult:m,sentences:j,remove:o,firstLetter:f}){const r=D(d=>d.isEn),l=T(d=>d.bookID),[h,x]=a.useState(!1),[v,i]=a.useState({text:"",id:-1}),t=a.useRef(null);a.useEffect(()=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{i({text:"",id:-1}),t.current=null},5e3)},[v]);function S(){if(h||i({text:r?"Select a dictionary":"Оберіть словник",id:1}),l===h){n(!1);return}const d=N(`neoword-item-${h}`);d.words[f]||(d.words[f]={}),d.words[f][_]={word:w,translations:g,time:p,isDifficult:m,sentences:j},localStorage.setItem(`neoword-item-${h}`,JSON.stringify(d)),o(),n(!1)}const k=N("neoword-books");function C({bookID:d}){const c=N(`neoword-item-${d}`);return e.jsx("div",{className:h===d?"variant gradient":"variant",onClick:()=>x(d),children:c.name})}return e.jsxs(M,{isOpen:u,onClose:()=>n(!1),className:"movemodal",children:[e.jsx("div",{className:"modal__header",children:r?"Dictionary selection":"Обирання словника"}),e.jsx("div",{className:"variants__list",children:k.map(d=>e.jsx(C,{bookID:d},d))}),e.jsx(O,{mode:"wait",children:v.id>0&&e.jsx(W.div,{className:"modal__error",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:v.text})}),e.jsx("div",{className:"modal__buttons one",children:e.jsx("div",{className:"modal__button gradient",onClick:S,children:r?"Select":"Обрати"})})]})}function z({index:u,sentences:n,removeSentence:_,ID:w,firstLetter:g}){const p=T(r=>r.bookID),m=N(`neoword-item-${p}`),[j,o]=a.useState(m.words[g][w].sentences[u]);function f(r){const l=[...n];l[u]=r,o(r);const h=N(`neoword-item-${p}`);h.words[g][w].sentences=l,localStorage.setItem(`neoword-item-${p}`,JSON.stringify(h))}return e.jsxs("div",{className:"sentence",children:[e.jsx("input",{value:j,onChange:r=>f(r.target.value)}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#000",onClick:()=>_(n[u]),children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})]})}function G({isOpen:u,setIsOpen:n,ID:_,sentences:w,setSentences:g,firstLetter:p}){const m=D(i=>i.isEn),j=T(i=>i.bookID),[o,f]=a.useState({text:"",id:-1}),[r,l]=a.useState(""),h=a.useRef(null);a.useEffect(()=>{h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{f({text:"",id:-1}),h.current=null},5e3)},[o]);function x(){if(r.length===0){f({text:m?"Enter a field":"Заповніть поле",id:1});return}if(w.includes(r)){f({text:m?"This sentence already exists":"Таке речення вже існує",id:1});return}const i=[...w,r],t=N(`neoword-item-${j}`);t.words[p][_].sentences=i,g(i),localStorage.setItem(`neoword-item-${j}`,JSON.stringify(t)),l("")}function v(i){const t=w.filter(k=>k!==i),S=N(`neoword-item-${j}`);S.words[p][_].sentences=t,g(t),localStorage.setItem(`neoword-item-${j}`,JSON.stringify(S))}return e.jsxs(M,{isOpen:u,onClose:()=>n(!1),children:[e.jsx("div",{className:"modal__header",children:m?"Example Sentences":"Речення до слова"}),e.jsx("div",{className:"modal__inputs",children:e.jsx("input",{type:"text",placeholder:m?"Sentence":"Речення",className:o.id>0?"modal__input sinput error":"modal__input sinput",value:r,onChange:i=>l(i.target.value)})}),e.jsx(O,{mode:"wait",children:o.id>0&&e.jsx(W.div,{className:"modal__error",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.text})}),e.jsx("div",{className:"sentences",children:w.map((i,t)=>e.jsx(z,{index:t,sentences:w,removeSentence:v,ID:_,firstLetter:p},t))}),e.jsx("div",{className:"modal__buttons",children:e.jsx("div",{className:"modal__button gradient right",onClick:x,children:m?"Add":"Додати"})})]})}function Q({ID:u,wordObj:n,search:_,searchBy:w,words:g,selected:p}){const m=T(s=>s.bookID),j=F(s=>s.setWords);if(n.translation){const s=N(`neoword-item-${m}`),b={word:n.word,translations:[n.translation],time:n.time,isDifficult:n.isDifficult,sentences:n.sentences};s.words[u]=b,localStorage.setItem(`neoword-item-${m}`,JSON.stringify(s)),n.translations=[n.translation]}const o=D(s=>s.isEn),[f,r]=a.useState(n.word),[l,h]=a.useState(n.translations),x=n.time,[v,i]=a.useState(n.isDifficult),[t,S]=a.useState(n.sentences),[k,C]=a.useState(!1),[d,c]=a.useState(!1),[E,A]=a.useState(!1),y=f[0].toLowerCase();function H(){J(f,l,!v)}function J(s,b,V=v){const $=N(`neoword-item-${m}`),L=s[0].toLowerCase(),R={word:s,translations:b,time:x,isDifficult:V,sentences:t};y!==L&&delete $.words[y][u],$.words[L]||($.words[L]={}),$.words[L][u]=R,localStorage.setItem(`neoword-item-${m}`,JSON.stringify($)),r(s),h(b),i(V)}function Z(){const s=N(`neoword-item-${m}`);delete s.words[y][u],localStorage.setItem(`neoword-item-${m}`,JSON.stringify(s)),j(s.words)}const I=new Date(x);if(!((w.toLowerCase()==="original"||w.toLowerCase()==="unknown")&&!f.toLowerCase().includes(_.toLowerCase()))&&!(w.toLowerCase()==="translation"&&!l.some(s=>s.toLowerCase().includes(_.toLowerCase())))&&!(p==="Difficult"&&!v||p==="Easy"&&v))return e.jsxs("div",{className:"word gradient",onClick:()=>C(!0),children:[e.jsx(Y,{isOpen:k,words:g,setIsOpen:C,editWord:J,oldWord:f,oldTranslations:l,oldIsDifficult:v,remove:Z}),e.jsx(q,{isOpen:d,setIsOpen:c,ID:u,word:f,translations:l,time:x,isDifficult:v,sentences:t,remove:Z,firstLetter:y}),e.jsx(G,{isOpen:E,setIsOpen:A,ID:u,sentences:t,setSentences:S,firstLetter:y}),e.jsxs("div",{className:"word__text",children:[e.jsx("p",{className:"word__word",children:f}),e.jsx("div",{className:"word__translations",children:l.map((s,b)=>e.jsx("div",{className:"word__translate",children:s},b))})]}),e.jsxs("div",{className:"word__footer",children:[e.jsx("div",{className:"word__left",children:e.jsx("div",{className:v?"word__difficult active":"word__difficult",onClick:s=>{s.stopPropagation(),H()},children:o?"Difficult":"Складно"})}),e.jsxs("div",{className:"word__right",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#fff",onClick:s=>{s.stopPropagation(),c(!0)},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#fff",onClick:s=>{s.stopPropagation(),A(!0)},className:t.length>0?"list-active":"",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})]})]}),e.jsx("div",{className:"word__date",children:`${I.getDate()}/${I.getMonth()+1}/${I.getFullYear()}`})]})}export{Q as default};
